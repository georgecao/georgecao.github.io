<!DOCTYPE html>
<html lang="zh_CN">
  <head>
    <meta charset="utf-8"/>
    <title>REPLoop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="乔治">
    <meta name="keywords" content="REPL,REPLoop,George,乔治">
    <meta name="generator" content="JBake v${jbakeVersion}">
    <meta property=og:locale content=zh_CN>
    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="img/favicon.svg">
    <script data-ad-client="ca-pub-2350040335860411" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="">REPLoop</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">博客</a></li>
            <li><a href="archive.html">归档</a></li>
            <li><a href="tags/index.html">标签</a></li>
            <li><a href="about.html">关于</a></li>
            <li><a href="feed.xml">订阅</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">
  		<a href="blog/2022/03/basic-accounting-concepts-2-debits-and-credits.html"><h1>基本会计概念2-借记与贷记</h1></a>
  		<p>
			<a href="/about.html"><strong>乔治</strong></a>于2022年03月03日
					<span class="badge badge-dark">复式记账</span>
					<span class="badge badge-dark">借记</span>
					<span class="badge badge-dark">贷记</span>
					<span class="badge badge-dark">译文</span>
		</p>
  		<p><div id="preamble"> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>这是一个帮你理解借记与贷记这两个会计概念的教程。</p> 
  </div> 
  <div class="paragraph"> 
   <p>大多数人认为会计涉及的数学不像理解会计概念那么难，而会计概念中最难理解掌握的2个就是借记与贷记。 现在借记和贷记的概念实际上已有500多年的历史，早在15世纪文艺复兴时期就被意大利威尼斯商人广泛使用。 这两个概念最早是在14世纪用拉丁文记载的，并在16世纪翻译为英语。随着500年的过去，我们可能对最初的含义和概念有些困惑，特别是英语对这些古老的词语采用了新的书面和日常含义，这有什么奇怪的吗？因此，当我们试图理解借记和贷记的概念时，回到最开始的地方可能是很有帮助…​…​但首先需要了解一些背景。</p> 
  </div> 
  <div class="paragraph"> 
   <p>点击 <a href="https://youtu.be/2Vlsr7gP3M8">Debits and Credits - Founding Principles</a>观看视频。（自备梯子）</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="基本会计概念为会计学生而准备">基本会计概念：为会计学生而准备</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>这个培训课程针对有意愿学习更多会计知识的学生们。虽然是针对学生开发的课程，但是对其他有兴趣全面理解会计概念的人也是有帮助的。在开始本课程之前，建议先完成 <a href="https://www.basicaccountingconcepts.education/basic-accounting-concepts-1-define-accounting/">基本会计概念1：定义</a>。本培训课程假定你对会计有一点了解，但又意识到要在工作应用或学习中跟进一步，你需要更全面地了解借记和贷记的概念。因此，本课程旨在从学生会计员的角度，提供"借记"和"贷记"概念的培训。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="关键词">关键词</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>借记，贷记，公司，账户，会计概念，记账，交易，会计系统，Luca Pacioli，账户类型，复式记账，交易的两面性</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="学习成果">学习成果</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>完成本次培训课程后，你将能够回答以下重点问题：</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>借记和贷记的由来是什么？</p> </li> 
    <li> <p>为什么叫做借记和贷记？</p> </li> 
    <li> <p>借记和贷记的基本概念是什么？</p> </li> 
    <li> <p>14世纪的人们是如何应用借记和贷记的？</p> </li> 
    <li> <p>是否有应用借记与贷记的其他方法？</p> </li> 
   </ul> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="简介借记和贷记">简介：借记和贷记</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>在字典中，记账系统中的<strong>借记</strong>定义为"记录在左边的交易记录"，<strong>贷记</strong>定义为"记录在右边的交易记录"。现在一些人对这样的定义也能接受，并且在学习了会计的其他所有的规则之后，成为了非常好的会计员。</p> 
  </div> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="https://www.reploop.org/blog/2022/03/images/t-txn.png" alt="T型账户" width="600"> 
   </div> 
   <div class="title">
    Figure 1. T型账户
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>不过，还有另外一些人希望对借记和贷记这两个基本会计概念有更多的理解，以便更有意义的应用它们。如果你是后一种人的话，这个课程就非常适合你。</p> 
  </div> 
  <div class="paragraph"> 
   <p>这个课程也将会说明"规则必须要学习，但是到一定阶段后规则背后的原因也必须讲清楚；不然的话就没有太多教育价值"。（Russel，B. （1924） Economic Individualism，Cambridge，On Education）。在课程继续往下之前，不论是规则学习者还是概念理解学习者都有必要记住下边表格中的内容和扎实理解在记账过程中不同账户类型的定义。</p> 
  </div> 
  <div class="exampleblock"> 
   <div class="content"> 
    <div class="paragraph"> 
     <p>注：非常清楚的是会计中使用的术语"借记"和"贷记"有其特殊的含义，不应该和他们的其他意思混淆。（例如欠别人的钱的债务和可以延迟支付购买商品的信用就不是会计中借记和贷记的意思）。同时，在同一个国家，一个术语的会计含义和它的常规含义也有不一样的用法。</p> 
    </div> 
   </div> 
  </div> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="https://www.reploop.org/blog/2022/03/images/debits-and-credits.jpg" alt="借记与贷记-缩略图" width="600"> 
   </div> 
   <div class="title">
    Figure 2. 借记与贷记缩略图
   </div> 
  </div> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody>
     <tr> 
      <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
      <td class="content"> 点击 <a href="https://app.box.com/s/v4j6okexia4y6lnj50t0">https://app.box.com/s/v4j6okexia4y6lnj50t0</a>下载原始文档 </td> 
     </tr> 
    </tbody>
   </table> 
  </div> 
  <table class="tableblock frame-all grid-all stretch"> 
   <caption class="title">
    Table 1. 我要借记还是贷记？
   </caption> 
   <colgroup> 
    <col style="width: 33.3333%;"> 
    <col style="width: 33.3333%;"> 
    <col style="width: 33.3334%;"> 
   </colgroup> 
   <thead> 
    <tr> 
     <th class="tableblock halign-left valign-top">账户类型</th> 
     <th class="tableblock halign-left valign-top">账户增加时，记作：</th> 
     <th class="tableblock halign-left valign-top">账户减少时，记作：</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">资产（Assets）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">负债（Liabilities）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">所有者权益（Owner’s Equity）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">收入（Revenue）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">支出（Expense）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="https://www.reploop.org/blog/2022/03/images/debit-or-credit.jpg" alt="借记还是贷记缩略图" height="400"> 
   </div> 
   <div class="title">
    Figure 3. 借记还是贷记缩略图
   </div> 
  </div> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody>
     <tr> 
      <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
      <td class="content"> 点击 <a href="https://app.box.com/s/e5ls2e8h1g7h8ykxfp3p">https://app.box.com/s/e5ls2e8h1g7h8ykxfp3p</a>下载海报 </td> 
     </tr> 
    </tbody>
   </table> 
  </div> 
  <div class="paragraph"> 
   <p>在用表1中的方法，你记录公司账户交易的时候可能会有以下问题：</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>交易相关的账户是什么？（至少涉及2个账户）</p> </li> 
    <li> <p>每个账户分别属于哪个账户分组？（必须属于五个分组之一）</p> </li> 
    <li> <p>该交易在账户中增加还是减少了相应的交易额？</p> </li> 
    <li> <p>应用表格中的逻辑。</p> </li> 
    <li> <p>确保"借记"部分的总金额="贷记"部分的总金额。</p> </li> 
   </ul> 
  </div> 
  <table class="tableblock frame-all grid-all stretch"> 
   <caption class="title">
    Table 2. 基本账户类型的定义
   </caption> 
   <colgroup> 
    <col style="width: 50%;"> 
    <col style="width: 50%;"> 
   </colgroup> 
   <thead> 
    <tr> 
     <th class="tableblock halign-left valign-top">账户类型</th> 
     <th class="tableblock halign-left valign-top">外行人的定义</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">资产（Asset）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">公司具有合法控制权的有价物品</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">负债（Liability）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">公司欠外部实体的钱（比如债权人或者贷款提供者）</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">所有者权益（Equity or Owners Equity）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">公司欠内部实体的钱（比如投资人或者所有者）</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">收入（Income）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">客户购买公司所提供的商品或服务所支付的钱</p></td> 
    </tr> 
    <tr> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">支出（Expense）</p></td> 
     <td class="tableblock halign-left valign-top"><p class="tableblock">公司为了挣钱而消耗的资产和物资。</p></td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="sect2"> 
   <h3 id="谁的视角">谁的视角？</h3> 
   <div class="paragraph"> 
    <p>一个困扰大多数新手会计的问题是"贷记"记录出现在他们自己的银行账单上。他们刚刚学到"银行里的现金"属于资产，根据表1的逻辑，当资产增加的时候记为"借记"。。。他们会问为什么我存钱的时候银行账户中的"贷记"总额反而增加了？</p> 
   </div> 
   <div class="paragraph"> 
    <p>答案对会计系统来说非常基础，也就是<strong>每个公司都从自己的视角记录交易</strong>。所以从银行的视角想一下。。。他们怎么看你刚刚存进去的钱？那是谁的钱？没错，肯定是你的钱。所以你的存款从银行的视角看就是负债（银行欠存款用户的钱）。当你存款到你的账户时，<strong>银行</strong>的负债就增加了，这也是为什么银行把你的账户记录为"贷记"（根据表1的逻辑）。</p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="课程借记与贷记">课程：借记与贷记</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="第1部分借记和贷记的由来是什么">第1部分：借记和贷记的由来是什么？</h3> 
   <div class="paragraph right"> 
    <p><span class="image"><img src="https://www.reploop.org/blog/2022/03/images/illustrations.jpg" alt="达芬奇的插画" width="400"></span></p> 
   </div> 
   <div class="paragraph"> 
    <p>在更原始的贸易时代，记账并不是什么大问题，因为商品的生产或者制造者往往也是市场上销售或者交换该商品的人。然而，文艺复兴时期，由罗马建造的交通系统和更复杂社会比如意大利（尤其是威尼斯）的发展带来了贸易和银行系统的巨大增长。因此，14世纪的威尼斯商人开发了会计系统来精确记录这些当时流行的也更复杂的交易。</p> 
   </div> 
   <div class="paragraph"> 
    <p>现在，那个时代的修士和数学家Luca Pacioli（1446-1517）被广泛的认为是"会计之父"。因为他是第一个在他的名为"数学，集合，比例以及比例关系的知识汇总"（翻译书名）的书中编写并发表这个会计系统的。这本书出版于1494年（大约是哥伦布发现美洲的时期），并且它是古腾堡出版社最早出版的书籍之一。Luca没有说是自己发明的会计系统，不过他确实是用其他人更容易理解的方式把它书写出来了。他记录意大利文艺复兴时期威尼斯商人使用的会计系统的目的是帮助Urbino的公爵Guidobaldo管理自己的财务。这个仅用全书五部分之中的一部分来描述的系统后来被称为"复式记账"系统。书中关于会计系统的36个简短章节是随后上百年里唯一的教科书，其原则一直为会计师所遵循，直到今日。 有趣的是，Luca Pacioli实际上和达芬奇的是同事，而且是达芬奇帮助他绘制了他的第二本最重要的书（神圣比例）的手稿中的插画。本书作者提到了这一事实，达芬奇也在他的笔记中多次提到Luca Pacioli。</p> 
   </div> 
   <div class="paragraph"> 
    <p>上面是多面体的插画，也是达芬奇在Luca书中的插图之一。Marcino Guerrero在他的文章中披露了更多关于Luca和达芬奇的其他趣事。</p> 
   </div> 
   <div class="imageblock left"> 
    <div class="content"> 
     <img src="https://www.reploop.org/blog/2022/03/images/summa-2.jpg" alt="基本会计概念" width="180"> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>Luca的大部分工作仍然支撑着我们现在所用的会计系统。来自他1494年出版的书中的那些基本会计概念至今还在沿用的有：</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>会计周期</p> </li> 
     <li> <p>流水账和分类账的使用</p> </li> 
     <li> <p>借记总金额等于贷记总金额：复式记账</p> </li> 
     <li> <p>账户分为资产（包括应收账款和应付账款），负债，初始资金，收入和支出5类</p> </li> 
     <li> <p>年底结算</p> </li> 
     <li> <p>试算表，他相信可以用来说明分类帐目的结余的。</p> </li> 
    </ul> 
   </div> 
   <div class="sect3"> 
    <h4 id="总结">总结</h4> 
    <div class="paragraph"> 
     <p>在第1部分，我们了解了借记和贷记500年的历史，以及修士和数学家的Luca Pacioli通过他的复式记账系统为会计学做出的显著贡献。</p> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="第2部分为什么叫做借记和贷记">第2部分：为什么叫做借记和贷记？</h3> 
   <div class="imageblock left"> 
    <div class="content"> 
     <img src="https://www.reploop.org/blog/2022/03/images/latin-coin.jpg" alt="拉丁硬币" width="180"> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>我们要知道，Luca与其说是会计师，不如说是一名数学家，所以他的大脑会下意识的去寻找支撑威尼斯商人使用的财务记录系统的关键原则、概念和对称性（symmetry）。</p> 
   </div> 
   <div class="paragraph"> 
    <p>他识别出来的关键概念有（1）在会计领域内，企业（或公司）是一个有自己权利的、有别于其所有者的独立实体。另外一个是（2）财务系统是封闭的系统。也就是说钱不是凭空产生，一个人收到的钱一定是别人给的，反之亦然。</p> 
   </div> 
   <div class="paragraph"> 
    <p>这种给出和收到的封闭系统让他看到和公司有关的交易是涉及2方的概念。例如，当一个人委托一定数量的钱给一个独立的不同公司，那个公司就欠此人同样数目的钱并有偿还的义务。Luca用他的母语拉丁文将委托行为命名为"Credre"（意思是委托）以及公司相应的偿还义务命名为"Debere"（意思是欠钱）</p> 
   </div> 
   <div class="paragraph"> 
    <p>因此，从公司的角度，他可以看出这个两面性原则对于该公司的每一笔交易都是成立的。对他来说，这不仅是一个公式，而是说交易的任何一方不能单独存在。在封闭系统中，每个"Debere"必须有一个对应的""Credre"，反之亦然。换句话说，"Debere"和"Credre"就是同一硬币的两面。（在金融领域，当某人"委托"钱财的时候一定有人会欠这部分钱）。</p> 
   </div> 
   <div class="paragraph"> 
    <p>Luca还注意到这种交易的两面性引申自经济资源的从一个地方转移到另一个的地方的事实。换句话说，对于每一笔交易，一定是经济资源从其来源转移到另一个目的地了。他再次应用了这一概念，即当经济资源从一个地方流向另一个地方时，来源记为贷记，目的地记为借记。他是如此确信两面性的概念，以至于他宣称任何人在没有确认"借记"总额和""贷记"总额相等之前不允许睡觉。（贷记=借记）</p> 
   </div> 
   <div class="exampleblock"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>注：英语翻译者使用拉丁词根来翻译这些概念，因此将他们命名为借记和贷记。也非常有可能我们也从拉丁词根中得出了这两概念的缩写形式（Dr 和 Cr）。因为英文词借记中没有"r"，但在其拉丁文"Debere"中有一个。</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="总结_2">总结</h4> 
    <div class="paragraph"> 
     <p>在第2部分中，我们看到了两面性概念的出现，其中借记和贷记只是同一枚硬币的两面，就像中国的“阴阳”概念在一个更大的整体中是互补的对立面一样。我们开始看到支持借记和贷记应用的概念，以及与原始拉丁词根及其原始含义的联系。</p> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="第3部分借记和贷记的基本概念是什么">第3部分：借记和贷记的基本概念是什么？</h3> 
   <div class="paragraph"> 
    <p>为了能够正确的理解借记与贷记，你需要首先了解支撑整个会计流程的概念。其中的一些称为会计惯例，而另一些则是加强了会计系统理解和记录交易的方式。</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="基本会计概念1_企业或公司是一个实体">基本会计概念1： 企业或公司是一个实体</h4> 
    <div class="paragraph"> 
     <p>简单来说，法律系统把实体定义为能够根据本国法律起诉或者被起诉的自然人或者非自然人。世界上的大多数国家，公司是作为非自然人实体，并被赋予和自然人相同的权利和义务。会计学进一步扩展了这个概念，每一个公司（包括个体户和合伙企业）都有自己的"会计实体"，并且每个实体的收入与资产净值都是通过自己的交易计算的。</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="基本会计概念2企业公司是有别于企业主的一个独立实体">基本会计概念2：企业（公司）是有别于企业主的一个独立实体</h4> 
    <div class="paragraph"> 
     <p>尽管一个公司可以"合法"的支配一些有价资产，但是它不是这些东西的最终拥有者。换句话说，如果公司出售所有能卖的东西，它有义务用出售所得的钱去偿还其他人或者实体提出的索赔要求。公司首先要偿还的是外部人员的索赔（例如贷款和债权），然后用余下的钱去偿还所有者的索赔。企业然后回到了刚开始的状态，没有任何偿还义务也不支配任何有价资产。</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="基本会计概念3_人可以有多种身份">基本会计概念3： 人可以有多种身份</h4> 
    <div class="paragraph"> 
     <p>虽然这并不是一个严格的会计概念，但却是识别交易记录的正确视角时非常重要的一个概念。就像一个人可以是父母，兄弟，表兄弟或者子孙，一个人也可以是一家公司的投资人，一家公司的债权人/债务人，一家公司的经理或者控制一家公司运营的董事。最重要的是，会计中总是从公司的视角来分析和记录的交易，而记录人是经理的身份（不是所有者）。</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="基本会计概念4_每笔交易都涉及2方一是经济资源的来源一是经济资源的去向">基本会计概念4： 每笔交易都涉及2方，一是经济资源的来源，一是经济资源的去向</h4> 
    <div class="paragraph"> 
     <p>财务世界是一个封闭的系统。也就是说钱不会凭空产生也不会凭空消失。如果一个人或者实体收到了钱，那一定从另一个人或实体来的。任何涉及经济资源的交易都必须有一个来源和一个去向。这是我们第一次了解今天在会计中使用的"借记"和"贷记"系统。</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="基本会计概念5_企业公司的经营所得归企业主">基本会计概念5： 企业（公司）的经营所得归企业主。</h4> 
    <div class="paragraph"> 
     <p>正如基本会计概念2所说的那样，从会计的视角看公司实际上不是任何东西的所有者。它可能具有合法的"所有权"或者控制权，当从根本上讲它是所有者为管理其事务而设立的会计实体。因此，当一家公司盈利时，它是所有者的利益而不是公司的。记住，如果把公司能卖的全部卖了，售卖所得首先用来偿还债务，余下的都归公司的所有者，公司什么也没剩下。</p> 
    </div> 
    <div class="imageblock text-center"> 
     <div class="content"> 
      <img src="https://www.reploop.org/blog/2022/03/images/words-accounting.jpg" alt="词云" width="50%"> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="总结_3">总结</h4> 
    <div class="paragraph"> 
     <p>在第三部分，我们理解了几个会计基本概念，这些概念不仅仅是"借记"与"贷记"的基础，同时也是整个会计系统的基础。我们了解了：</p> 
    </div> 
    <div class="ulist"> 
     <ul> 
      <li> <p>企业或者公司是一个实体</p> </li> 
      <li> <p>企业（公司）是有别于企业主的一个独立实体</p> </li> 
      <li> <p>人可以有多种身份且可以用不同的身份工作</p> </li> 
      <li> <p>每个金融交易都涉及2方（一个来源一个去向）</p> </li> 
      <li> <p>公司经营所得利润归公司的所有者</p> </li> 
     </ul> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="第4部分14世纪的人们是如何应用借记和贷记的">第4部分：14世纪的人们是如何应用借记和贷记的？</h3> 
   <div class="imageblock text-center"> 
    <div class="content"> 
     <img src="https://www.reploop.org/blog/2022/03/images/venice.jpg" alt="威尼斯" width="60%"> 
    </div> 
    <div class="title">
     Figure 4. 威尼斯
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>正如Luca所说的，他所记录的会计系统被威尼斯商人广泛使用。这些人似乎是15世纪的企业家。我们假设一名叫做安东尼奥的威尼斯企业家，在Luca1494年完成他著名的书之前，请Luca为他的新企业（公司）记录财务账目。</p> 
   </div> 
   <div class="exampleblock"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>注：为了故事方便，我们使用美元和英语会计术语</p> 
     </div> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>故事开始…​…​</p> 
   </div> 
   <div class="paragraph"> 
    <p>安东尼奥发现了一个贩卖意大利橄榄到埃及的机会，并且觉得能大发一笔。因此，安东尼奥（作为新公司的总经理）接触了一个意大利橄榄供应商，说服他提供价值100000美元的橄榄，并且等到他从埃及回来的时候再付款。安东尼奥没有提起他将要赚到的钱，因为橄榄供应商只关心卖橄榄出去。</p> 
   </div> 
   <div class="paragraph"> 
    <p>这样，Luca有了第一笔交易，用借记和贷记的拉丁原意记录如下：</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>经济资源的<strong>来源</strong>是意大利橄榄供应商，公司现在欠他100000美元：记为贷记（Cr）应付账款。</p> </li> 
     <li> <p>经济资源转移的<strong>去向</strong>是公司收到的橄榄的库存：记为借记（Dr）库存</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>利用表1中的方法，我们做如下记录：</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre>资产：库存（增加）               $100,000 Dr
负债：应付账款给橄榄供应商（增加）  $100,000 Cr</pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>很快，安东尼奥就带他去看他刚花50000美元买的船。其中的30000是安东尼奥自己的钱，另外20000从银行贷款。安东尼奥非常兴奋，因为他终于有办法把想法变为现实并且通过贩卖橄榄来赚取他梦寐以求的财富。<strong>Luca意识到当安东尼奥不停的说他做了什么的时候，其实是说他作为总经理的公司做了什么。</strong>Luca知道公司已经产生了第二笔交易，再次从公司的视角记录如下：</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>一个经济资源的<strong>来源</strong>是银行，公司从银行贷款20000美元：贷记（CR）银行贷款</p> </li> 
     <li> <p>另一个经济资源的<strong>来源</strong>是公司的所有者安东尼奥自己出的30000美元。公司将他看作一个独立的实体：贷记（Cr）初始资金</p> </li> 
     <li> <p>经济资源的<strong>去向</strong>是从银行和所有者那筹来的总计50000美元购买的船：借记（Dr）船</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>应用表1的方案，我们做如下记录：</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre>资产：船（增加）                    $50,000 Dr
负债：银行贷款（增加）               $20,000 Cr
所有者权益：初始资金（增加）          $30,000 Cr</pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>Luca很高兴，因为这2次交易中（1）总的贷记金额等于总的借记金额并且（2）遵循了"复式记账"系统的基本概念。</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="总结_4">总结</h4> 
    <div class="paragraph"> 
     <p>借助支撑"复式记账"系统的概念以及经济资源的来源和去向的概念，我们尝试去了解Luca在记录这个虚构的15世纪企业的账本条目时的思考。</p> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="第5部分是否有应用借记与贷记的其他方法">第5部分：是否有应用借记与贷记的其他方法？</h3> 
   <div class="paragraph"> 
    <p>今天我们看Luca的笔记并且从中发现了一个新的模式。显然Luca能用经济资源的来源和去向的概念记录所有的交易。 看起来就是…​…​</p> 
   </div> 
   <div class="imageblock"> 
    <div class="content"> 
     <img src="https://www.reploop.org/blog/2022/03/images/source-and-destination-of-value.jpg" alt="资金的来源和去向总额相等" width="50%"> 
    </div> 
    <div class="title">
     Figure 5. 资金的来源和去向总额相等
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>…​…​先继续讲故事。</p> 
   </div> 
   <div class="paragraph"> 
    <p>成功完成他的"销售之旅"后，安东尼奥很快回到了城里。安东尼奥说他（作为经理）以200000美元卖掉了所有的橄榄，这趟旅程仅花费了30000美元，其中还包括了付给银行的1000美元利息。他说他用销售收入付了这些费用，他还把欠橄榄供应商的钱还了。他还说他为了庆祝这次成功的销售之旅，用1000美元的销售收入给家里买了家具。我们马上意识到公司的第3次交易产生了，涉及4个主要部分：</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>第1部分：销售橄榄所得的200000美元现金</p> </li> 
     <li> <p>第2部分：支付橄榄供应商的未结账款</p> </li> 
     <li> <p>第3部分：用30000美元销售收入来支付旅途费用和银行利息</p> </li> 
     <li> <p>第4部分：安东尼奥（作为企业主）支取并使用了10000美元</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>接下来我们代替Luca记录这些交易，用经济资源的来源和去向的方法决定交易是"借记"还是"贷记"，并将其结果与根据上面表1中所列规则得出的结果进行比较。</p> 
   </div> 
   <div class="paragraph"> 
    <p>下面是我们得出的结果：</p> 
   </div> 
   <table class="tableblock frame-all grid-all stretch"> 
    <caption class="title">
     Table 3. 交易记录
    </caption> 
    <colgroup> 
     <col style="width: 20%;"> 
     <col style="width: 20%;"> 
     <col style="width: 20%;"> 
     <col style="width: 20%;"> 
     <col style="width: 20%;"> 
    </colgroup> 
    <thead> 
     <tr> 
      <th class="tableblock halign-left valign-top">公司的动作</th> 
      <th class="tableblock halign-left valign-top">来源还是去向？</th> 
      <th class="tableblock halign-left valign-top">贷记/借记</th> 
      <th class="tableblock halign-left valign-top">交易额</th> 
      <th class="tableblock halign-left valign-top">账户类型</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">交易第1部分</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司卖了价值200000美元的商品</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">这笔进入公司的资金<strong>来源</strong>是销售橄榄给消费者所得收入</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">200000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">收入（收入-增加）= 贷记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司收到销售橄榄所得的200000美元现金</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">销售收入的<strong>去向</strong>是现金资产</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">200000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资产（资产-增加）=借记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">交易第2部分</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司用销售收入支付橄榄供应商</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">用于支付供应商的资金<strong>来源</strong>是现金资产</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">100000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资产（资产-减少）=贷记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司支付了橄榄供应商的未结清账款</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金的<strong>去向</strong>是欠供应商的债务</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">100000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">负债（负债-减少）=借记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">交易第3部分</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司用销售收入支付旅途费用和银行利息</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金<strong>来源</strong>是现金资产</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">30000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资产（资产-减少）=贷记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司支付银行利息</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金的一部分<strong>去向</strong>是银行利息</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">支出（支出-增加）=借记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司支付旅途费用</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金的另一部分<strong>去向</strong>是旅途费用</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">29000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">支出（支出-增加）=借记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">交易第4部分</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">公司提取10000美元现金</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金的<strong>来源</strong>是现金资产</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">贷记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资产（资产-减少）=贷记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">安东尼奥（作为企业主）个人使用了公司的这部分钱</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">资金的<strong>去向</strong>是企业主</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">借记</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td> 
      <td class="tableblock halign-left valign-top"><p class="tableblock">权益（权益-减少）=借记</p></td> 
     </tr> 
     <tr> 
      <td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock">交易记录结束</p></td> 
     </tr> 
    </tbody> 
   </table> 
   <div class="paragraph"> 
    <p>所有的账户类型都涉及到了，并且我们用"来源与去向"的方法得出了与用表1的方法一样的结果，除此之外，这样还有实际意义，而且它们与Luca的原始拉丁含义是保持一致的。</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="总结_5">总结</h4> 
    <div class="paragraph"> 
     <p>在第5部分，我们探索了通过经济资源的来源和去向的角度解释所有交易的想法。仅用2个主要的问题，我们就能够应用一个不同的而且更有实际意义的方法来确定公司账本中的一笔交易是借记还是贷记。我们试图将这种方法与Luca Pacioli对借记和贷记术语的可能含义联系起来。因此，除了学习表1的方法并将其中的逻辑应用于你的借记于贷记之外，你还可以应用从Luca的工作的第一原则发展而来的另一种方法，即任何交易中转移的经济资源的来源记为贷记，其相应的去向记为借记。</p> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="补充资源">补充资源</h2> 
 <div class="sectionbody"> 
  <div class="ulist"> 
   <ul> 
    <li> <p>"Tao of Financial Information"的第21章，http://taofinancial.blogspot.com/</p> </li> 
    <li> <p>关于记账和会计的文章</p> </li> 
   </ul> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="结论借记与贷记">结论：借记与贷记</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>本次培训课程的主要收获是：</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>理解借记和贷记术语的由来</p> </li> 
    <li> <p>理解他们叫做借记和贷记的原因</p> </li> 
    <li> <p>识别和理解借记与贷记中的基本会计概念</p> </li> 
    <li> <p>了解14世纪时人们是如何应用借记与贷记的</p> </li> 
    <li> <p>找到另外一种在交易中应用借记和贷记的有意义的方法</p> </li> 
   </ul> 
  </div> 
  <div class="paragraph"> 
   <p>我们在本文开始的时候就着手全面理解关于借记和贷记的基本会计概念。我们知道我们可以通过简单的应用表1中的方法就可以成为一个成功的会计员，但是有些人想要理解"为什么"是这样。通过回到他们产生的时间，查看其本来的意思，我们能够应用一个新的方法决定交易中借记和贷记。</p> 
  </div> 
  <div class="paragraph"> 
   <p>本文译自https://www.basicaccountingconcepts.education/basic-accounting-concepts-2-debits-and-credits, 拷贝地址到浏览器或者<strong><a href="https://www.basicaccountingconcepts.education/basic-accounting-concepts-2-debits-and-credits/">点此</a></strong>阅读原文。</p> 
  </div> 
 </div> 
</div></p>
  		<a href="blog/2022/02/json-translator-for-formats.html"><h1>JSON解析与对象生成</h1></a>
  		<p>
			<a href="/about.html"><strong>乔治</strong></a>于2022年02月10日
					<span class="badge badge-dark">JSON</span>
					<span class="badge badge-dark">antlr</span>
					<span class="badge badge-dark">AST</span>
					<span class="badge badge-dark">抽象语法树</span>
					<span class="badge badge-dark">代码生成</span>
					<span class="badge badge-dark">Thrift</span>
					<span class="badge badge-dark">Protobuf</span>
					<span class="badge badge-dark">编程语言</span>
		</p>
  		<p><div id="preamble"> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>现如今，基于HTTP/HTTPS的RESTful API的广泛应用，而JSON则是其传输数据的默认格式。 一些公司针对内部团队的API也都用HTTP/HTTPS协议，作为API的调用方，就需要大量的处理JSON解析的工作。除了Javascript之外的语言，都或多或少的要做这个工作。<span class="underline"><a href="https://github.com/reploop/reploop-parser">reploop-parser</a></span>项目一来想实践一下编译原理中从词法，语法，解析器到中间代码生成等等的东西，另外也能自动化处理JSON到对象的映射，减少手动敲机械键盘写代码带来的噪音。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="json解析">JSON解析</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>JSON解析是基于antlr 4.8做的。关于词法，语法，解析器等方面另外写一篇介绍吧。这篇主要介绍JSON转为Bean的部分。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="json的特点">JSON的特点</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>JSON本身表达的就是一个树形结构，和Java的对象层次结构一样的。</p> 
  </div> 
  <div class="paragraph"> 
   <p>JSON是一个数据，也就是值(Value)，弱类型的。它的基本数据类型是数据本身描述的，并不是通过语言提供的类型系统来申明的。而强类型语言如Java在声明变量的时候必须知道他的数据类型，所以从JSON数据解析为POJO的过程就涉及一个类型推导。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="类型推导">类型推导</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>JSON是一个数据，从 <a href="https://www.json.org/json-en.html">JSON.org</a> 能知道它只有以下数据：</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>数组</p> </li> 
    <li> <p>对象(Key-Value)</p> </li> 
    <li> <p>数字</p> </li> 
    <li> <p>字符串</p> </li> 
    <li> <p>常量("true","false","null")</p> </li> 
   </ul> 
  </div> 
  <div class="paragraph"> 
   <p>用Java的术语来描述一下，其中的<strong>数组</strong>和<strong>对象</strong>可以称之为复杂数据类型(Wrapper Type)，是由真正的基本数据类型(Primitive Type)包括<strong>数字</strong>、<strong>字符串</strong>和<strong>常量</strong>组成的。除了基本数据类型，数组和对象都可以深层次的嵌套所有的数据的，包括其自己，展开来就形成了一个树形结构。</p> 
  </div> 
  <div class="paragraph"> 
   <p>基于这个数据构成，以及JSON的特点，可以按照如下规则做类型推导：</p> 
  </div> 
  <div class="olist arabic"> 
   <ol class="arabic"> 
    <li> <p>JSON是一个树形层次结构</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>根结点名字定义为$。树中的每个节点都是一个属性及其类型，也就是的（name，type）。对于数组，可以用元素的下标作为属性名称，参见图1<a href="#attributes-tree">属性树</a>。其实这样就把整个JSON统一为对象(key-value)结构的树了。</p> </li> 
       <li> <p>叶子节点是最基本的数据，也就是简单基本类型数据：数字，字符串和常量</p> </li> 
       <li> <p>除叶子节点之外，树的中间某个节点的所有子节点都是相同的类型</p> </li> 
      </ul> 
     </div> </li> 
    <li> <p>同构容器</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>静态类型语言的特性，这点和动态类型或者弱类型语言很大不同</p> </li> 
       <li> <p>数组(或者列表)的元素是相同类型的（按照规范是可以不相同的）</p> </li> 
       <li> <p>对象类型的所有的key是相同类型的（规范中只允许字符串），所有的value也是相同类型的（按照规范是可以不相同的）</p> </li> 
      </ul> 
     </div> </li> 
    <li> <p>递归深度, 依赖于antlr 4.8</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>解析JSON树是一个递归的过程。</p> </li> 
       <li> <p>受Stack空间的限制，递归不能够层次太深。</p> </li> 
       <li> <p>尾递归优化可以不受这个限制。antlr 4.8没有这个优化。</p> </li> 
      </ul> 
     </div> </li> 
    <li> <p>JSON中的对象(Key-Value)可以映射为Java中的Map或者Object，他们是等价的，从易用性角度酌情使用不同的类型</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>key是数字或者以数字打头的都对应到Map类型</p> </li> 
       <li> <p>key符合Java语言命名规范的都对应到Object类型</p> </li> 
      </ul> 
     </div> </li> 
    <li> <p>空值</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>一些不规范的JSON有些时候<strong>空字符串</strong>其实意味着空值<code>null</code></p> </li> 
       <li> <p>对象为空<code>{}</code>，元素类型不确定，都推断为Object</p> </li> 
       <li> <p>数组为空<code>[]</code>，元素类型不确定，推断为Object</p> </li> 
      </ul> 
     </div> </li> 
    <li> <p>常量<code>null</code>值，</p> 
     <div class="ulist"> 
      <ul> 
       <li> <p>单独看常量<code>null</code>没有任何类型线索</p> </li> 
       <li> <p>如果以上步骤不能确定类型，则对应到Object类型</p> </li> 
      </ul> 
     </div> </li> 
   </ol> 
  </div> 
  <div class="paragraph"> 
   <p>下面这段JSON：</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code class="language-json" data-lang="json">{
  "name": "reploop.org",
  "views": 1000,
  "friends": [
    {"id":23,"gender":"male"},
    {"id":24,"gender":"unknown"}
  ],
  "links": {
    "name": "reploop.net",
    "views": 2000,
    "friends": [],
    "links": {}
  }
}</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>对应的树是这样的：</p> 
  </div> 
  <div id="attributes-tree" class="imageblock"> 
   <div class="content"> 
    <img src="https://www.reploop.org/blog/2022/02/images/attributes-tree.svg" alt="属性树"> 
   </div> 
   <div class="title">
    Figure 1. 属性树
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="继承结构">继承结构</h3> 
   <div class="paragraph"> 
    <p>由于</p> 
   </div> 
   <div class="olist arabic"> 
    <ol class="arabic"> 
     <li> <p>相同的Object可以在不同的子树中使用（相同的深度）</p> </li> 
     <li> <p>相同的Object可以在不同的层次中使用（不同的深度）</p> </li> 
    </ol> 
   </div> 
   <div class="paragraph"> 
    <p>我们应该尽量避免重复定义对象，尽可能的少定义对象。这就涉及2方面的事情：</p> 
   </div> 
   <div class="olist arabic"> 
    <ol class="arabic"> 
     <li> <p>相同对象的识别</p> 
      <div class="ulist"> 
       <ul> 
        <li> <p>2个对象的属性(对应JSON中的key)的名称，数目以及每个属性的类型都相同的话，我们认为这两个对象相同。</p> </li> 
       </ul> 
      </div> </li> 
     <li> <p>继承关系的识别</p> 
      <div class="ulist"> 
       <ul> 
        <li> <p>继承关系，可以理解为包含关系，也就是子类包含了父类的属性。这个过程可以看作是寻找公共属性的过程，用树的语言来讲，自顶向下的看就是寻找<strong>最大公共子树</strong>。</p> </li> 
       </ul> 
      </div> </li> 
    </ol> 
   </div> 
   <div class="paragraph"> 
    <p>寻找<strong>最大公共子树</strong>看着非常匹配，也有高效的算法实现，但是他处理不了<strong>对象属性缺失</strong>，<strong>数组元素数不等</strong>以及<strong>空值</strong>等不规范的情况。最后还是用<strong>包含关系</strong>的理解，把属性和属性所属的对象组织为<strong>属性x对象</strong>的二维表，属性包含在对象里面记为1，否则记为0。最后问题转化为求二维表中连续为1的元素组成的面积。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="自包含">自包含</h3> 
   <div class="paragraph"> 
    <p>一个类的属性的类型是类本身，体现在JSON数据就是数据可以递归嵌套。</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre>class Code {
    private Code child;
    private Integer id;
}</pre> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="命名规范">命名规范</h3> 
   <div class="paragraph"> 
    <p>API返回的JSON基本上都是API开发者定义好的，给啥就是啥。 所以如果用JSON里面的key的名字原封不动的生成对象的属性，即使能编译通过，IDE也会报各种警告，这可能会让代码强迫症患者抓狂。</p> 
   </div> 
   <div class="paragraph"> 
    <p>常见的命名规范有驼峰，下划线或者中划线分割名字，除此之外还涉及大小写不规范，不分大小写和单词连接在一起（如<em>helloworld</em>）等问题。这些都可能在一个JSON文档里面混合着出现。。。</p> 
   </div> 
   <div class="paragraph"> 
    <p>所以我们也针对key的名称做了一些统一处理。 方法就是先按照分隔符或者驼峰的大小写变化分词，然后把分词之后的每个词对照着字典在分为有意义的多个英文单词，这时就会有多种分法，比如<em>another</em>可以是1个单词，也可以拆分成两个单词<em>an</em>和<em>other</em>。把所有的得到的单词都组成一个状态机，问题转化为寻找给定字符串的最长前缀同时也是最多单词匹配的。</p> 
   </div> 
   <div class="paragraph"> 
    <p>之后按照想要的命名规范比如驼峰的形式生成属性名，然后用<code>annotation</code>的方式记录原始名字，保证对象的序列化和反序列化能正常工作。</p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="jsonpath的支持">JsonPath的支持</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>使用JsonPath是想用JsonPath的方式指定一些属性，然后针对这些属性做特殊的配置，来影响生成的对象。目前的实现里面还不是很规范。完善后补充。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="可配置点">可配置点</h2> 
 <div class="sectionbody"> 
  <div class="ulist checklist"> 
   <ul class="checklist"> 
    <li> <p><i class="fa fa-square-o"></i> 数值类型是否使用 <code>byte</code> 或者 <code>short</code>， 可以仅仅使用 <code>Integer</code>，<code>Long</code> 或者 <code>Float</code>，<code>Double</code>。</p> </li> 
    <li> <p><i class="fa fa-check-square-o"></i> Raw JSON解析。也就是String的值其实是一个JSON字符串，可以进一步的解析对象</p> </li> 
    <li> <p><i class="fa fa-check-square-o"></i> 支持Jackson注解</p> </li> 
    <li> <p><i class="fa fa-square-o"></i> 生成Jackson反序列化代码</p> </li> 
    <li> <p><i class="fa fa-square-o"></i> Lombok支持，builder模式</p> </li> 
    <li> <p><i class="fa fa-check-square-o"></i> 驼峰变量名重写</p> </li> 
    <li> <p><i class="fa fa-square-o"></i> 代码路径版本化，不会覆盖上次生成的代码</p> </li> 
    <li> <p><i class="fa fa-square-o"></i> 字符串与boolean值的转换，比如<code>"true|yes|1"⇒true</code>或者<code>"false|no|0" ⇒ false</code></p> </li> 
    <li> <p><i class="fa fa-square-o"></i> 整数与boolean值的转换，比如<code>1⇒true</code>或者<code>0⇒false</code></p> </li> 
   </ul> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="实现方案">实现方案</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>具体到实现的时候，采用先将JSON解析为Protobuf的方式，然后再将Protobuf转为Java。这样就是选择Protobuf为一种中间表达(IR)，就像Java的bytecode一样，这样方便利用Protobuf的多语言支持，将JSON转化为更多目标语言。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="使用方式">使用方式</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>打算通过3种方式来使用，分别是：</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="命令行">命令行</h3> 
   <div class="paragraph"> 
    <p>参见项目<code>json2bean-standalone</code>，用Maven打包生成一个可执行的jar包，然后通过命令行传输参数执行。</p> 
   </div> 
   <div class="paragraph"> 
    <p>直接运行：</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-bash" data-lang="bash">java -jar json2bean-standalone-0.17-SNAPSHOT.jar</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>输出帮助信息：</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-bash" data-lang="bash">usage: json2 &lt;command&gt; [ &lt;args&gt; ]                   <i class="conum" data-value="1"></i><b>(1)</b>

Commands are:
    bean    Convert JSON to POJO.                   <i class="conum" data-value="2"></i><b>(2)</b>
    help    Display help information                <i class="conum" data-value="3"></i><b>(3)</b>
    proto   Translate JSON to Protobuf Schema. TBD. <i class="conum" data-value="4"></i><b>(4)</b>

See 'json2 help &lt;command&gt;' for more information on a specific command.</code></pre> 
    </div> 
   </div> 
   <div class="colist arabic"> 
    <table> 
     <tbody>
      <tr> 
       <td><i class="conum" data-value="1"></i><b>1</b></td> 
       <td>json2 可以在命令行设置一个<code>alias json2="java -jar json2bean-standalone-0.17-SNAPSHOT.jar"</code>。 这里面的Java环境和Jar包的路径需要根据自身情况修改一下。</td> 
      </tr> 
      <tr> 
       <td><i class="conum" data-value="2"></i><b>2</b></td> 
       <td>bean命令，生成POJO。</td> 
      </tr> 
      <tr> 
       <td><i class="conum" data-value="3"></i><b>3</b></td> 
       <td>help命令，默认打印帮助信息。</td> 
      </tr> 
      <tr> 
       <td><i class="conum" data-value="4"></i><b>4</b></td> 
       <td>proto命令，生成Protobuf Schema。筹划中。。。</td> 
      </tr> 
     </tbody>
    </table> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="maven插件">Maven插件</h3> 
   <div class="paragraph"> 
    <p>筹划中。。。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="intellij_idea插件">Intellij IDEA插件</h3> 
   <div class="paragraph"> 
    <p>筹划中。。。</p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="参考">参考</h2> 
 <div class="sectionbody"> 
  <div class="ulist"> 
   <ul> 
    <li> <p><a href="https://github.com/m-zajac/json2go.git" class="bare">https://github.com/m-zajac/json2go.git</a></p> </li> 
   </ul> 
  </div> 
 </div> 
</div></p>
  		<a href="blog/2021/11/languages-i-learned-those-years.html"><h1>这些年学过/用过的编程语言</h1></a>
  		<p>
			<a href="/about.html"><strong>乔治</strong></a>于2021年11月19日
					<span class="badge badge-dark">Java</span>
					<span class="badge badge-dark">Ruby</span>
					<span class="badge badge-dark">Lua</span>
					<span class="badge badge-dark">Swift</span>
					<span class="badge badge-dark">Clojure</span>
					<span class="badge badge-dark">Scala</span>
					<span class="badge badge-dark">Golang</span>
					<span class="badge badge-dark">Javascript</span>
					<span class="badge badge-dark">Shell</span>
					<span class="badge badge-dark">Kotlin</span>
					<span class="badge badge-dark">C</span>
					<span class="badge badge-dark">Python</span>
					<span class="badge badge-dark">编程语言</span>
		</p>
  		<p><div id="preamble"> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>计算机专业科班，工作10+年，一直没有停止过编程。从事的工作兜兜转转，刚好就碰到了好多编程语言，下面说说我和这些编程语言的缘分。</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="缘分">缘分</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="java">Java</h3> 
   <div class="paragraph"> 
    <p>Java是工作之前做的项目用的语言，学习和实践都需要用到的。他也是我工作之后的主要语言。第一份工作去了搜狐，当时的面试官后来评价说当时的面试表现比有些毕业几年的人都好。（不是自吹，可能刚好蒙对了命题范围，我当然也有百度笔试不过的经历）。</p> 
   </div> 
   <div class="paragraph"> 
    <p>Java是我唯一不停的跟踪其发展，尝试新功能，保持刻意学习的语言。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="lua">Lua</h3> 
   <div class="paragraph"> 
    <p>Lua就比较巧儿，决定用之前还没写过一行Lua代码。当时面临的场景是有个业务涉及到一些规则频繁的变动，实现的时候是用后端Java服务来做的，所以更新就会稍微麻烦一点。当时使用的反向代理是nginx，一直想说写个nginx插件把这个事情做了。这样规则计算和流量型的nginx集合起来，还能提高机器资源利用率。后来就发现了Lua和nginx结合比较开发友好，比C语言省事多了。</p> 
   </div> 
   <div class="paragraph"> 
    <p>想清楚之后就可以学习Lua，真的是从Reading The Fucking Manual开始的，然后看了几本电子书，边看边写的。最后写出来的是一个Lua+MongoDB操作的规则计算引擎，每天服务1+亿人。</p> 
   </div> 
   <div class="paragraph"> 
    <p>只可惜，后来想想这种越是灵活的东西，越是对用户不友好，学习成本高，面向一般人员的UI不好做，只能给程序员使用了。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="javascript">Javascript</h3> 
   <div class="paragraph"> 
    <p>Javascript我想Web开发的人很早的时候就接触了。 说几个古老的技术大概就理解了：ASP，JSP，jQuery，Ajax等。直到后来前后端分离之后，Javascript已然是最火热的语言之一了。大体上就是这些年后端造的轮子都会用Javascript再造一遍的意思。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="ruby">Ruby</h3> 
   <div class="paragraph"> 
    <p>Ruby是被迫学习的。面临的情况是团队不得已要优化，结果就是人走了，项目还得运行迭代。 刚开始看着源代码头大，然后就是看官网的语言设计原则，找了4，5本书快速看一遍，逐渐适应了另一种风格的语言，然后就逐渐的看明白了并且开始写bug了。</p> 
   </div> 
   <div class="paragraph"> 
    <p>一段时间被Ruby惊艳到了，觉得Ruby大概是CRUD工程师很好的选择，对于创业公司来讲，撸一个MVP是分分钟的事情。只可惜人才供给少，一般公司不敢入Ruby的坑吧。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="golang">Golang</h3> 
   <div class="paragraph"> 
    <p>Golang是公司买了一个系统，这个系统就是Golang写的。我要负责接收这个系统。听说过『Google出品，必属精品』的话，那就能想到Golang的新闻或者文章很多，还有很多拿他和Java做对比。这个项目不仅仅是一个业务系统，还涉及到算法。就这样我就开始从听过过Golang的人，到开始维护Golang版本的维特比，DFS与剪枝等算法。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="clojure">Clojure</h3> 
   <div class="paragraph"> 
    <p>Clojure语言是用Storm流式计算系统的时候碰到的。当时Storm非常热门，但是其核心代码是用Clojure写的。有些行为不理解的时候，最真实的答案就再源代码里面。所以就必须去理解，去调试，去验证。Clojure只能是远观，因为没有写部署到生产环境的Clojure代码。写Clojure代码，大概有一种手动构建抽象语法树的意思(AST)。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="scala">Scala</h3> 
   <div class="paragraph"> 
    <p>JVM生态中的函数式编程，出来的很早，加上当时Twitter公司的很多开源项目就用Scala写的，当时所在的公司里面也有项目在用。也仅仅是浏览过几本书。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="shell">Shell</h3> 
   <div class="paragraph"> 
    <p>工作大部分时间都是面向服务端的而且需要自己运维机器，所有命令行工具就必须要掌握。所以统计脚本，写过服务启动、停止的脚本，写过监控的脚本。有很多问题用脚本验证一下也很快。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="swiftobject_c">Swift/Object-C</h3> 
   <div class="paragraph"> 
    <p>也是团队优化项目不优化的情况下，开始维护iOS的APP。维护的过程中做一些必要的学习。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="kotlin">Kotlin</h3> 
   <div class="paragraph"> 
    <p>机缘巧合，不得不开始写Android的APP了。刚开始用Java，团队里面的主力Android开发，也是一个好学的人。把Java代码逐步的都翻译为Kotlin了，也就依葫芦画瓢的开始学习Kotlin了。Java和Kotlin是两种思路，时不时的交错，写出来的代码两边都不像。就这样也算是半个主力，短时间内撸出来一个APP。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="c">C</h3> 
   <div class="paragraph"> 
    <p>C语言除了学校里学过之后，工作中基本上和C打交道都是因为nginx。曾经和同事一起调试一个二分算法边界处理不严谨带来的偶发(数据相关)死循环的问题，连续debug了nginx好几天。</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="python">Python</h3> 
   <div class="paragraph"> 
    <p>Python大部分情况下是shell脚本搞不定了，就用Python来写写。谈不上会写Python，也没有经历过大型生产环境的项目。只能是放本字典再身边，用的时候翻字典，开卷考试那种。</p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="如何学习">如何学习</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>从语言到工程应用，学习的过程基本上就是围绕着系统的生命周期来。</p> 
  </div> 
  <div class="dlist"> 
   <dl> 
    <dt class="hdlist1">
     语言与代码 
    </dt> 
    <dd> 
     <p>见过的编程语言多了之后，学习的过程大概就不会重点放在语法的部分，而是着重要了解语言的设计思路，语言的特性。把这个理解透彻了，后面会事半功倍的。一上来就着急开始写代码，不停的遇到拦路虎，这时候就不停的搜索以解决问题。这就变成了所谓的『面向搜索引擎』的编程。等你静下心来回头看，每个问题的解决办法都透露着语言的哲学。 这个阶段我一般是找3+本书，都快速浏览一遍，然后把符合自己胃口的书再精读一下。对于有经验的程序员，我是相信『21天学会编程』的。</p> 
    </dd> 
    <dt class="hdlist1">
     模块化 
    </dt> 
    <dd> 
     <p>大点的项目都是多人协作共同开发，然后代码的组织方式就很重要。有时候觉得语言很简单，但是项目代码确很庞大。所以要对语言写成的文件，命名空间，类/函数，代码块，作用域等特别关注一下，这些东西是模块化中最基本的东西。</p> 
    </dd> 
    <dt class="hdlist1">
     中间件 
    </dt> 
    <dd> 
     <p>每个语言大概都有几个应用广泛的中间件，比如Java的Spring, Ruby的Rails等等。这也是要重点关注的地方，大部分项目都离不开这些中间件。</p> 
    </dd> 
    <dt class="hdlist1">
     数据库 
    </dt> 
    <dd> 
     <p>计算机程序是算法+数据组成的，也就是code+data。只要涉及数据，大概率是要用到数据库。语言生态对数据库的支持也很重要。Ruby生态的ActiveRecord所应用的Association Model对简单应用开发效率是非常大的提升。</p> 
    </dd> 
    <dt class="hdlist1">
     依赖管理 
    </dt> 
    <dd> 
     <p>大项目都需要有依赖管理，工具就要有个必要的了解。尤其是碰到依赖冲突，多版本，找不到的资源的情况下。 开源的语境下，这也是想快速应用开源的代码要掌握的工具。</p> 
    </dd> 
    <dt class="hdlist1">
     构建工具 
    </dt> 
    <dd> 
     <p>构建工具大部分开发者不需要关注，把源代码打包成可以在服务器或者应用容器内跑起来的程序，每个语言都提供对应的编译器。这里想强调的是持续构建，就是程序员只需要提交代码，后面的构建都不需要太多参与，解放程序员。</p> 
    </dd> 
    <dt class="hdlist1">
     部署工具 
    </dt> 
    <dd> 
     <p>把打包好的程序放到服务器上并且跑起来，这是部署工具要解决的问题。这部分可以是『人工智能』的手动用scp，ftp之类的工具放上去或者下载下来，然后用命令行来启动，小小作坊大概就是这样的了。再面对的机器数，应用数，应用类型，运维不同的情况下需要一个稳定的可扩展的工具帮助团队做部署。</p> 
    </dd> 
    <dt class="hdlist1">
     运维 
    </dt> 
    <dd> 
     <p>这部分设计监控，报警，修复，扩容，缩容，测试，性能，安全等等方面的东西。 程序是跑到计算机中的，所以对他赖以生存的环境是非常有必要了解的。也就是对操作系统，网络，数据库原理，安全加密，协议，标准，内存，CPU，磁盘等等方面都要有一定的了解，学无止境。</p> 
    </dd> 
   </dl> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="总结">总结</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>常有争论，谁是世界上最好的编程语言？我的答案是没有最好，只有最适合。也就是那句话：抛开场景谈功能都是耍流氓。每个语言都有其最佳应用场景，单纯的对比语言，首先就是评判标准都不统一，不一致，得出的结论也就没啥实际意义。</p> 
  </div> 
  <div class="paragraph"> 
   <p>还有一类问题，是我要不要学习某某语言？反过来看这可能不是你决定的，是事情决定的。当然你要是对某某语言特别有兴趣，那就自己学就好了。如果语言只是吃饭讨生活的工具，那就遇到什么样子的问题，准备最合适解决该问题的工具吧。</p> 
  </div> 
  <div class="paragraph"> 
   <p>最后，也经常听到有人接我不会某某语言，解决不了某某问题。 这就是问题还不够要命，职责还不够明确。职场上要不想办法解决了，要不就换一个坑位吧。作为程序员，以我不会某某语言为由，在我看来大概也不可能是一个优秀的工程师了，持续学习很重要。</p> 
  </div> 
 </div> 
</div></p>

	<hr />
	
	<p><a href="archive.html">点击查看更多文章</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2020 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v${jbakeVersion}</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
  </body>
</html>